"use strict";(self.webpackChunkaerospace_jam=self.webpackChunkaerospace_jam||[]).push([[4114],{2125:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started/adding-a-sensor/adding-a-sensor","title":"Adding a Sensor","description":"Now that we have our WebUI up and running, we can add a sensor\'s data to the stream.","source":"@site/docs/getting-started/adding-a-sensor/adding-a-sensor.md","sourceDirName":"getting-started/adding-a-sensor","slug":"/getting-started/adding-a-sensor/","permalink":"/getting-started/adding-a-sensor/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"description":"Now that we have our WebUI up and running, we can add a sensor\'s data to the stream."},"sidebar":"tutorialSidebar","previous":{"title":"Testing it All / Transferring the code to the Pi","permalink":"/getting-started/testing-it-all/"},"next":{"title":"Adding a Route","permalink":"/getting-started/adding-a-route/"}}');var s=t(4848),i=t(8453);const a={sidebar_position:6,description:"Now that we have our WebUI up and running, we can add a sensor's data to the stream."},o="Adding a Sensor",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Understanding the Template WebUI",id:"understanding-the-template-webui",level:2},{value:"Adding a Sensor",id:"adding-a-sensor-1",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"adding-a-sensor",children:"Adding a Sensor"})}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"For this guide, you'll need:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A computer with the tools from previous parts of this guide installed, and your project folder based on the template WebUI"}),"\n",(0,s.jsx)(n.li,{children:"Thonny opened on the computer and connected to your Pi"}),"\n",(0,s.jsx)(n.li,{children:"A sensor connected to the Pi with functioning code"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"understanding-the-template-webui",children:"Understanding the Template WebUI"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Remember that you don't have to neccesarily use the template provided, or keep the internals of it unmodified. If you can improve it (or even rewrite it), go for it! That kind of initive or coding expertise will be recognized in the scoring process."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"from aerospacejam import AerospaceJamServer\nimport time\n\nWIFI_CONFIG = {\n    'ssid': 'CHANGEME_AerospaceJam', # You should change these two lines!\n    'password': 'CHANGEME_password',\n    'static_ip': '192.168.4.1',\n    'subnet_mask': '255.255.255.0',\n    'gateway': '192.168.4.1',\n    'dns': '192.168.4.1'\n}\n\n# Initialize the server with your Wi-Fi configuration\npico_server = AerospaceJamServer(WIFI_CONFIG)\n\n# Register a sensor - this is a dummy sensor\npico_server.register_sensor(\"dummy\", lambda: 25 + (time.time() % 10))\n\n# Start the web server\npico_server.run()\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["First, we import the ",(0,s.jsx)(n.code,{children:"aerospacejam"})," module. This was written for the convenience of the teams competing this year, but you can feel free to modify it if you need to."]}),"\n",(0,s.jsxs)(n.li,{children:["Then, we import ",(0,s.jsx)(n.code,{children:"time"})," to be able to check the current timestamp for the dummy sensor."]}),"\n",(0,s.jsx)(n.li,{children:"Then, we initialize the webserver and hotspot with a configuration, and register a dummy sensor."}),"\n",(0,s.jsxs)(n.li,{children:["How is the dummy sensor defined?","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["It's a ",(0,s.jsx)(n.em,{children:"lambda"}),", which is a way to define a function compactly."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"adding-a-sensor-1",children:"Adding a Sensor"}),"\n",(0,s.jsxs)(n.p,{children:["Now, let's see an example of code to register the ",(0,s.jsx)(n.a,{href:"/challenges/thermometer",children:"thermometer"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:'# trimmed for brevity...\ndef get_temp(unit: str="F") -> float:\n    """\n    Gets the temperature from the thermometer.\n\n    Parameters:\n    - unit: The unit of temperature to get the temperature in. Can be "F", "C", or "tuple". "tuple" causes a return value of (tempC, tempF).\n    """\n    global roms, ds_sensor\n    ds_sensor.convert_temp()\n    if unit not in ["F", "C", "tuple"]:\n        raise ValueError(f"Invalid unit: {unit}")\n    tempC = ds_sensor.read_temp(roms[0])\n    tempF = temp * (9/5) + 32\n    if unit == "tuple":\n        return tempC, tempF\n    elif unit == "C":\n        return tempC\n    elif unit == "F":\n        return tempF\n\npico_server.register_sensor("Thermometer (degrees F)", get_temp)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can see that we pass the function as an argument - sometimes, functions can be treated as variables and can be passed to functions, too, just like any other value. If you ever need to pass ",(0,s.jsx)(n.em,{children:"arguments"})," to a function, you can register it like this, with a lambda:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:'pico_server.register_sensor("Thermometer (degrees C)", lambda: get_temp("C"))\n'})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);